drop database userapi_db;
use userapi_db;

show tables;

-- DESCRIBE
DESCRIBE user;
DESCRIBE admin;
DESCRIBE teacher;
DESCRIBE student;
DESCRIBE pedagogic;

DESCRIBE class;
DESCRIBE student_class;
DESCRIBE teacher_class;

DESCRIBE annotation;
DESCRIBE annotation_class;
DESCRIBE annotation_student;

DESCRIBE feedback;
DESCRIBE feedback_class;
DESCRIBE feedback_user;

DESCRIBE council;
DESCRIBE council_teacher;

DESCRIBE pre_council;
DESCRIBE pre_council_section;

-- SELECT
SELECT * FROM user;
SELECT * FROM admin;
SELECT * FROM teacher;
SELECT * FROM student;
SELECT * FROM pedagogic;

SELECT * FROM class;
SELECT * FROM student_class;
SELECT * FROM teacher_class;

SELECT * FROM annotation;
SELECT * FROM annotation_class;
SELECT * FROM annotation_student;

SELECT * FROM feedback;
SELECT * FROM feedback_class;
SELECT * FROM feedback_user;

SELECT * FROM council;
SELECT * FROM council_teacher;

SELECT * FROM pre_council;
SELECT * FROM pre_council_section;

DELIMITER //

CREATE PROCEDURE DeleteAllRecords()
BEGIN
    -- Desabilitar chaves estrangeiras temporariamente
    SET FOREIGN_KEY_CHECKS = 0;
	set sql_safe_updates = 0;
    -- Apagar registros de cada tabela
    DELETE FROM admin;
    DELETE FROM annotation;
    DELETE FROM annotation_class;
    DELETE FROM annotation_student;
    DELETE FROM class;
    DELETE FROM council;
    DELETE FROM council_teacher;
    DELETE FROM feedback;
    DELETE FROM feedback_class;
    DELETE FROM feedback_user;
    DELETE FROM pedagogic;
    DELETE FROM pre_council;
    DELETE FROM pre_council_section;
    DELETE FROM student;
    DELETE FROM student_class;
    DELETE FROM teacher;
    DELETE FROM teacher_class;
    DELETE FROM user;

    -- Reabilitar chaves estrangeiras
    SET FOREIGN_KEY_CHECKS = 1;
END //

DELIMITER ;

-- Para executar o procedimento e apagar todos os registros
CALL DeleteAllRecords();